; A339355: Maximum number of copies of a 12345 permutation pattern in an alternating (or zig-zag) permutation of length n + 7.
; Submitted by loader3229
; 8,16,64,112,272,432,832,1232,2072,2912,4480,6048,8736,11424,15744,20064,26664,33264,42944,52624,66352,80080,99008,117936,143416,168896,202496,236096,279616,323136,378624,434112,503880,573648,660288,746928,853328,959728,1089088,1218448,1374296,1530144,1716352,1902560,2123360,2344160,2604160,2864160,3168360,3472560,3826368,4180176,4589424,4998672,5469632,5940592,6479992,7019392,7634432,8249472,8947840,9646208,10436096,11225984,12116104,13006224,14005824,15005424,16124304,17243184,18491712
; Formula: a(n) = b(n-1), b(n) = c(n-3), b(4) = 272, b(3) = 112, b(2) = 64, b(1) = 16, b(0) = 8, c(n) = truncate((c(n-4)*(n+7)+12*c(n-2)+2*c(n-1)+2*c(n-3))/(n+3)), c(6) = 2912, c(5) = 2072, c(4) = 1232, c(3) = 832, c(2) = 432, c(1) = 272, c(0) = 112

#offset 1

mov $2,8
mov $3,16
mov $4,64
mov $5,112
sub $0,1
lpb $0
  mov $7,$1
  add $7,8
  mul $2,$7
  rol $2,4
  mov $6,$2
  mul $6,2
  add $5,$6
  mov $6,$3
  mul $6,12
  add $5,$6
  mov $6,$4
  mul $6,2
  mov $7,$1
  add $7,4
  add $5,$6
  div $5,$7
  sub $0,1
  add $1,1
lpe
mov $0,$2
